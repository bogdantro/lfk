{% extends 'core/base.html' %}
{% load static %}

{% block content %} 
<link rel="stylesheet" href="{% static '/scss/userprofile/login.css' %}" type="text/css">
<link rel="stylesheet" href="{% static '/scss/userprofile/myaccount.css' %}" type="text/css">


<div class="cover">
    <div class="content">
        <h1>Create account</h1>
        <p>Already got an account? <a href="/login/">Use that instead</a></p>
    </div>
</div>

<div  id="signUpForm" >
     <form method="post">
        
         {% csrf_token %}
          {{form.errors}}
            <input style="display: none;" type="email" id="email" name="email" required oninput="this.setCustomValidity('')">
            <label for="" >Email</label>
            <br>
            <input type="email" name="username" id="username" required>
            <br>
            <br>
            
            <label for="">First name</label>
            <br>
            <input type="text" name="first_name" required>
            <br>
            <br>

            <label for="">Last name</label>
            <br>
            <input type="text" name="last_name" required>
            <br>
            <br>

            <label for="">Password </label>
            <br>
            <input type="password" id="password1" name="password1" required>
            <br>
            <br>
            <label for="">Retype password </label>
            <br>
            <input type="password" id="password2" name="password2" required>
            <br>
            <br>

            <button type="submit">Create account</button>
        </form>
    </div>


 <script>
    // Automatically convert email input to lowercase on typing or blur
    document.addEventListener("DOMContentLoaded", function() {
        const emailInput = document.getElementById("username");

        if (emailInput) {
            // Convert to lowercase on blur (when the input loses focus)
            emailInput.addEventListener("blur", function() {
                emailInput.value = emailInput.value.toLowerCase();
            });

            // Optionally convert to lowercase as the user types
            emailInput.addEventListener("input", function() {
                emailInput.value = emailInput.value.toLowerCase();
            });
        }
    });
</script>

<script type="text/javascript">

async function getEmail(){
    const email = document.getElementById('email');
    const username = document.getElementById('username');

    email.value = username.value
}

setInterval(() => {
    getEmail();
}, 10);

</script>
{% endblock %}
